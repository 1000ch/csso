<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>CSS optimizer</title>
    <link rel="stylesheet" href="csso.css" type="text/css">
</head>
<body>
    <script src="lib/cssp.js"></script>
    <script src="lib/cssm.js"></script>
    <script src="lib/cssoutils.js"></script>

    <div class="stat">
        Src length: <span id="slength">0</span>, dst length: <span id="dlength">0</span>, compression: <span id="result">0</span>%.
    </div>
    <textarea class="csstxt" id="csssrc"></textarea>
    <input type="button" value="basic" id="basic" />
    <input type="button" value="min" id="min" />
    <input type="button" value="minbasic" id="minbasic" />
    <input type="button" value="statbasic" id="statbasic" />
    <input type="button" value="statmin" id="statmin" />
    <input type="button" value="dump" id="dump" />
    <textarea class="csstxt" id="cssdst"></textarea>

    <script>
        var csssrc = document.getElementById('csssrc'),
            cssdst = document.getElementById('cssdst'),
            slength = document.getElementById('slength'),
            dlength = document.getElementById('dlength'),
            result = document.getElementById('result');

        csssrc.onchange = function() {
            slength.innerText = csssrc.value.length;
        };

        function updateStat() {
            dlength.innerText = cssdst.value.length;
            result.innerText = (100 * cssdst.value.length / csssrc.value.length).toFixed(2);
        }

        document.getElementById('basic').onclick = function() {
            cssdst.value = $cssoutils.basic2string($cssp.parse(csssrc.value).nodes, '');
            updateStat();
        };

        document.getElementById('min').onclick = function() {
            cssdst.value = $cssoutils.min2string($cssm.minimize($cssp.parse(csssrc.value)).nodes, '');
            updateStat();
        };

        document.getElementById('minbasic').onclick = function() {
            cssdst.value = $cssoutils.basic2string($cssm.minimize($cssp.parse(csssrc.value)).nodes, '');
            updateStat();
        };

        document.getElementById('statbasic').onclick = function() {
            cssdst.value = $cssoutils.getstatstring($cssp.parse(csssrc.value).nodes, '');
            updateStat();
        };

        document.getElementById('statmin').onclick = function() {
            cssdst.value = $cssoutils.getstatstring($cssm.minimize($cssp.parse(csssrc.value)).nodes, '');
            updateStat();
        };

        document.getElementById('dump').onclick = function() {
            cssdst.value = $cssoutils.dump2string($cssp.parse(csssrc.value).nodes, '');
            updateStat();
        }
    </script>

</body>
</html>